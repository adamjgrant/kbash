kbash.check=function(e,t,n,r){Tecate=new Object,Tecate.validHTMLElements=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","colgroup","del","details","dfn","dir","div","dl","!doctype","dt","em","embed","fieldset","figcaption","figure","font","footer","form","frame","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","listing","map","mark","marquee","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","plaintext","pre","progress","q","ruby","s","samp","script","section","select","small","source","span","strike","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],Tecate.missingClosingBracket={regex:new RegExp("(<[^>]+<)","g"),message:"Opening bracket with no closing bracket"},Tecate.invalidHTMLElement={regex:new RegExp("(<(?!/?"+Tecate.validHTMLElements.join("\\b|/?")+"\\b)[^ \n>]+)","gi"),message:"Opening HTML tag without a valid element name"},Tecate.missingEquals={regex:new RegExp("(<[^=>]+['\"]\\S+['\"]([^>]*>)?)","g"),message:"Missing equals sign for attribute"},Tecate.missingQuoteAfterEquals={regex:new RegExp("( [^\"']+=[^'\"]+['\"])[ >]","g"),message:"Missing quote after equals sign for attribute"},Tecate.missingQuoteAtEndOfAttribute={regex:new RegExp("(\\S+=['\"][^'\">]+(>|['\"][^ />]))","g"),message:"Missing quote at the end of the attribute"},Tecate.errors=[Tecate.missingQuoteAtEndOfAttribute,Tecate.missingQuoteAfterEquals,Tecate.missingClosingBracket,Tecate.missingEquals,Tecate.invalidHTMLElement],Tecate.getPageSource=function(e){return $.get(window.location.href,function(t){e(t)})},Tecate.insertErrorDiv=function(){var e=$("<ul id='tecate-errors-list'></ul>").css({padding:0,margin:0}),t=$("<div id='tecate-errors'/>").css({backgroundColor:"#f2dede",padding:"10px 25px",border:"1px solid #eed3d7",borderRadius:"4px",color:"#b94a48",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSize:"14px",marginBottom:"7px"})},Tecate.htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},Tecate.htmlEscaper=/[&<>"'\/]/g,Tecate.escapeHTML=function(e){return(""+e).replace(Tecate.htmlEscaper,function(e){return Tecate.htmlEscapes[e]})},Tecate.appendError=function(e){console.kbash(e.errorString+Tecate.escapeHTML(e.error)+" on line "+e.line)},Tecate.showErrors=function(e){if(e.length===0)return;Tecate.insertErrorDiv();var n=0;for(var r=0;r<e.length;r++)t.have("c")?n++:Tecate.appendError(e[r]);t.have("c")&&console.kbash(n+" error(s) found")},Tecate.getErrorLines=function(e,t){var n=t.split("\n"),r=0;for(var i=0;i<n.length;i++){r+=n[i].length;if(e<=r)return i+1}return n.length},Tecate.stripComments=function(e){return e.replace(/<!--([\s\S]*)--(\s*)>/g,"")},Tecate.stripTag=function(e,t){return e.replace(new RegExp("<"+t+"[^>]*>([\\s\\S]*)</"+t+">","g"),"")},Tecate.evaluateHTML=function(e){var t,n=[],r=Tecate.stripTag(e,"script"),i=Tecate.stripTag(r,"style"),s=Tecate.stripComments(i);for(var o=0;o<Tecate.errors.length;o++){var u=Tecate.errors[o];while((t=u.regex.exec(s))!==null)n.push({errorString:u.message,error:t[1],line:Tecate.getErrorLines(e.indexOf(t[1]),e),html:e})}Tecate.showErrors(n)},$(function(){Tecate.test||Tecate.getPageSource(Tecate.evaluateHTML)})};